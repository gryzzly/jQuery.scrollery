/**
 * jQuery.scrollery – simple gallery that uses scrolling.
 * @author Misha Reyzlin <http://mishareyzlin.com>
 * @license – WTFPL <http://sam.zoy.org/wtfpl/>
 * @version 0.4.2
 */
 ;(function(a){a.fn.scrollery=function(c){var d=a(document);c=a.extend({delay:500,hideScrollBar:true,keyboardControls:true},c);var b=function(e){this.container=e;this.list=this.container.children("ul");this.items=this.list.children();this.len=this.items.length;this.images=this.list.find("img");this.imagesCounter=0;if(c.hideScrollBar){this.list.css("overflow-x","hidden")}this.loadImages()};b.prototype={imageDone:function(){this.imagesCounter+=1;if(this.imagesCounter===this.images.length){this.init()}},loadImages:function(){var e=this;this.images.each(function(){if(this.complete||this.clientHeight>0){e.imageDone()}else{this.onload=function(){e.imageDone()};this.onerror=function(){e.imageDone()}}})},doScroll:function(){var e,f;if(this.list.is(":animated")){return}f=0;e=this.list.scrollLeft();while(f<this.len){f+=1;if(e<this.positions[f]){break}}this.list.scrollTo(e<this.positions[this.len-1]?this.positions[f]:0,c.delay)},setWidths:function(){var f=this.items.last(),e=parseInt(this.items.eq(0).css("margin-right"));f.css("margin-right",e);f.css("margin-right",this.list.outerWidth()-this.images.last().width()-parseInt(f.css("margin-right")));this.scrollDelta=this.childrenWidth+parseInt(this.list.css("padding-left"))+parseInt(this.list.css("padding-right"));this.scrollDelta-=this.list.outerWidth();this.scrollDelta-=parseInt(this.items.eq(0).css("padding-left"));this.scrollDelta-=parseInt(this.items.eq(0).css("padding-right"))},init:function(){var e=this;this.positions=[];this.childrenWidth=0;this.scrollDelta=0;this.list.scrollLeft(0);for(var f=0;f<this.len;f+=1){this.positions.push(Math.ceil(parseFloat(this.items.eq(f).position().left)));this.childrenWidth+=this.items[f].clientWidth}this.setWidths();if(this.list.outerWidth()>this.childrenWidth){return}this.container.bind("click.scrollery",function(){e.doScroll()});if(c.keyboardControls){d.bind("keydown.scrollery",function(h){var g=h.keyCode||h.which;if(g===39){h.preventDefault();e.doScroll()}})}a(window).resize(function(){e.setWidths()})}};return this.each(function(){new b(a(this))})}}(jQuery));
